<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<title>Iterators & Blocks</title>
<script src='https://use.typekit.net/iel2sql.js'></script>
<script>
  try{Typekit.load({ async: false });}catch(e){}
</script>
<link href="../../../stylesheets/all-be69b63e.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script src="../../../javascripts/all-780487bd.js"></script>
</head>
<body>
<main>
<header class='navigation' role='banner'>
<div class='navigation-wrapper'>
<a class="logo" href="//adadevelopersacademy.org">Ada Developers Academy</a>
<a class='navigation-menu-button' href='javascript:void(0)' id='js-mobile-menu'>Links</a>
<nav role='navigation'>
<ul class='navigation-menu show' id='js-navigation-menu'>
<li class='nav-link'><a href="/textbook/">Home</a></li>
<li class='nav-link'><a href="/textbook/about">About</a></li>
<li class='nav-link'><a href="//github.com/Ada-Developers-Academy/">Github</a></li>
<li class='nav-link'><a href="/textbook/contact">Contact</a></li>
</ul>
</nav>
</div>
</header>

<div class='toc sliding-panel-content'><button class='toc-menu' type='button'>Toggle Table of Contents</button>
<h2 class='toc-title'>Table of Contents</h2>
<div class='toc-content'>
<h3 class='toc-unit'>JavaScript</h3>
<button class='toc-chapter '>Introduction</button>
<ol class=' toc-lectures'>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/introduction/how-we-got-to-now">How We Got to Now</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/introduction/in-the-browser-on-the-server">In the Browser & On the Server</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/introduction/objects-core-types">Objects & Core Types</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/introduction/exercise-practice-making-objects-functions">Exercise: Practice Making Objects & Functions</a></li>
</ol>
<button class='toc-chapter '>Fun with Functions</button>
<ol class=' toc-lectures'>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/expressions-declarations">Expressions & Declarations</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/higher-order-functions">Higher Order Functions</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/exercise-array-prototype-sort">Exercise: Array.prototype.sort</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/closures">Closures</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/exercise-make-an-accumulator">Exercise: Make an Accumulator</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/objects-inheritance">Objects & Inheritance</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/fun-with-functions/exercise-turducken">Exercise: Turducken</a></li>
</ol>
<button class='toc-chapter '>npm & Node</button>
<ol class=' toc-lectures'>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/npm-node/installation">Installation</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/npm-node/using-npm-and-the-node-repl">Using npm and the Node REPL</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/npm-node/using-require-and-module-">Using `require` and `module`</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/npm-node/the-event-loop-the-what-and-why-of-asynchronous-programming">The Event Loop: The What and Why of Asynchronous Programming</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/npm-node/exercise-your-first-webserver">Exercise: Your First Webserver</a></li>
</ol>
<button class='toc-chapter '>Building Web Apps with Node & Express</button>
<ol class=' toc-lectures'>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/building-web-apps-with-node-express/installing-express">Installing Express</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/building-web-apps-with-node-express/typical-structure-of-an-express-web-application">Typical Structure of an Express Web Application</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/building-web-apps-with-node-express/incorporating-sql-an-exercise-in-asynchronous-patience">Incorporating SQL: An Exercise in Asynchronous Patience</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/javascript/building-web-apps-with-node-express/exercise-port-sinatra-to-express">Exercise: Port Sinatra to Express</a></li>
</ol>
<button class='toc-chapter '>Building & Deploying Node APIs</button>
<ol class=' toc-lectures'>
</ol>
<h3 class='toc-unit'>Fundamentals of Programming</h3>
<button class='toc-chapter is-current'>Introduction to Ruby</button>
<ol class='is-current toc-lectures'>
<li class='toc-lecture'><a class="toc-link" href="/textbook/fundamentals-of-programming/introduction-to-ruby/welcome-to-ruby">Welcome to Ruby</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/fundamentals-of-programming/introduction-to-ruby/core-data-types">Core Data Types</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/fundamentals-of-programming/introduction-to-ruby/iterators-blocks">Iterators & Blocks</a></li>
<li class='toc-lecture'><a class="toc-link" href="/textbook/fundamentals-of-programming/introduction-to-ruby/flow-control-conditionals">Flow Control & Conditionals</a></li>
</ol>
</div>
</div>
<div class='content'>
<div class='breadcrumbs'>
<a href="/textbook/fundamentals-of-programming">Fundamentals of Programming</a>
<a href="/textbook/fundamentals-of-programming/introduction-to-ruby">Introduction to Ruby</a>
<a href="/textbook/fundamentals-of-programming/introduction-to-ruby/iterators-blocks">Iterators & Blocks</a>
</div>

<div class="lecture"><h1 id="ruby-103-iterators--blocks">Ruby 103: Iterators &amp; Blocks</h1>

<h2 id="iterators">Iterators</h2>

<p><em>Iteration</em> is the process of programatically interacting with a collection of values, one at a time. We call it “looping” sometimes, and we do a lot of it. Here is a simple loop; fire up irb and give it a try:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">n</span> <span class="p">}</span> <span class="c1"># So... what happened</span>
</pre></td></tr></tbody></table>
</div>

<h4 id="question-what-is-times">Question: What is <code>times</code>?</h4>

<p>We can iterate all kinds of things, but probably the most common and most fun is iterating an <em>Array</em>. They’re especially suited for iteration because they, by default, have a objective order to their elements. Here’s an example of iterating an <em>Array</em> using the <code>each</code> <em>method</em>:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">10</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>
<p>Cool, right? <code>each</code> iterated the <em>Array</em>, starting with the first value, multiplied the value by 10, and spit it out. It knew what to do on each step of the iteration because we provided a <em>block</em> of instructions.</p>

<h3 id="lets-talk-about-blocks">Let’s talk about Blocks…</h3>

<p>Blocks are not a unique features of Ruby, but they’re one that many people talk about (and more people use without realizing it!) What is a block?</p>

<blockquote>
  <p>A section of code which is grouped together.</p>
</blockquote>

<p>Zzzzz….</p>

<p>A block is a piece of code that is not executed immediately, but is stored in a variable or passed to a method, and is potentially executed at a later moment in time.</p>

<p>Sound complicated? Let’s look at some Ruby.</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">100</span> <span class="c1"># &lt;= this is a block. :)</span>
<span class="k">end</span>

<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">].</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">100</span> <span class="c1"># &lt;= this is a block too! :D</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

<p><code>number * 100</code> is a chunk of code, similar to what would be in a method, but in this case we don’t need to go through all the trouble of creating a method to iterate over some numbers.</p>

<p>Block can be identified by either <code>do ... end</code> or <code>{ }</code>.</p>

<p>Block arguments are defined using a pair of <code>|</code> (pipe) characters. They look like a slide, so I like to say that we slide arguments into the block. For example:</p>

<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>[1,2,3].each do |number|
  puts number # wheeeee! Right down the slide!
end
</pre></td></tr></tbody></table>
</div>

<p><code>number</code> is the defined argument, this means that objects given to the block are going to be assigned to the <code>number</code> variable within the scope of the block.</p>

<h3 id="exercise-walk-through-a-loop">Exercise: Walk Through a Loop:</h3>

<p>It’s very important to understand what’s happening during iteration. The best way to get comfortable with loops is to make a chart showing how values change during iteration. Here’s an example of a loop and it’s corresponding value chart:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">100</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">4</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<table>
  <thead>
    <tr>
      <th>loop count</th>
      <th>value of n</th>
      <th>output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>11</td>
      <td>44</td>
    </tr>
    <tr>
      <td>2</td>
      <td>5</td>
      <td>20</td>
    </tr>
    <tr>
      <td>3</td>
      <td>8</td>
      <td>32</td>
    </tr>
    <tr>
      <td>4</td>
      <td>100</td>
      <td>400</td>
    </tr>
  </tbody>
</table>

<p>With a pair, figure out what’s happening on each iteration of the following loop, on paper, using the handy table template:</p>

<table>
  <thead>
    <tr>
      <th>loop count</th>
      <th>value of x</th>
      <th>value of y</th>
      <th>output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>You’ll need more rows, but you get the idea.</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
  <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">x</span>
    <span class="nb">puts</span> <span class="n">y</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="n">x</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>
</div>

</div>
<footer role='contentinfo'>
<div class='breadcrumbs'>
<a href="/textbook/fundamentals-of-programming">Fundamentals of Programming</a>
<a href="/textbook/fundamentals-of-programming/introduction-to-ruby">Introduction to Ruby</a>
<a href="/textbook/fundamentals-of-programming/introduction-to-ruby/iterators-blocks">Iterators & Blocks</a>
</div>

<div class='copyright'>
&copy; 2015
<a href="//github.com/Ada-Developers-Academy/textbook/">Released under the MIT License</a>
by
<a href="//adadevelopersacademy.org">Ada Developers Academy</a>
</div>
</footer>

</main>
<div class='toc-fade'></div>
</body>
</html>
